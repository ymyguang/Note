## 云服务器hexo搭建踩坑记

### 前言

最近网课结束了，之前在阿里云领的服务器安装的是window系统，目的是刷网课，好的是网课结束了，于是乎就又把服务器安装上了centos了，自己水平很菜，有又什么新奇的玩法，就打算那服务当作博客使用。当初使用的博客程序是：wordpress，对于操作来说基本上是傻瓜式的，所以我想试试用Hexo搭建一个博客。

那就再网上找搭建教程，本以为搭建的过程会很顺利，但是我完全高估了自己的水平了，哈哈，错误频出，曾今一度陷入大坑。经过1天的折腾，博客最起码可以访问了。

在这里，我们直接用ftp向云服务传送写好的文档，免去的git安装的操作，配置更加简单。（仅限云服务器，GitHub还是需要git的）

### 踩坑一:困惑

当我在网络上搜索时，网上的都是hexo+GitHub的博客搭建教程（我自己有服务器，其实是不需要用GitHub），刚开始的时候，我跟着一步一步的做，越做越困惑，跟GitHub有什么关系？我有自己的服务器呀！                                             所以在这里说一下为什么有GitHub：

首先众所周知，GitHub是全球最大的同性交友网站，~~起作用就是交友~~，是用来同步自己的代码的。当然玩法也不止如此。再来看看hexo是什么东东。

> Hexo是一个快速、简洁且高效的博客框架。 Hexo使用Markdown解析文章，在几秒内，即可利用靓丽的主题生成静态网页。 

没错，hexo并不是一个博客程序，而是一个markdown转html等文件的转换工具！！！！明白这一点，就很好说了。

hexo+GitHub的工作原理：

​		1. 自己在本机写好markdown文档

​		2. hexo经过一系列的处理将文件转换成html等文件

  3.   通过git远程pull将hexo生成的文件推送到GitHub内。

       

由于GitHub支持html等文件的渲染和解析，当我们直接访问GitHub中的io域名时，就可以访问到网站了（静态网站）但是有时候GitHub系列的网站在大陆不是很稳定，所以可以结合云服务器来搭建博客。此时云服务器就是一个展示的功能。当我们使用云服务情况下，相比GitHub来展示博客而言，云服务（安装Nginx）会更简便一下。

### 踩坑二：报错

在执行：hexo init 或者是不管执行啥命令都会返回usage，

![image-20200628174528421](../aimg/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20200628174528421.png)

通过一阵子的搜索，发现了问题！没有在hexo的目录文件下执行hexo命令，直接设置环境环境变量还是可以解决的（我估计时安装hexo不完整，包管理程序安装的软件一般都会自己设置系统变量的）

### 踩坑三：本地图片测试正常，但是网页上却不再显示

#### 问题原因

经过测试发现，在md中所写的图片地址，是在public的相对地址，但是在本地的typora软件中，相对的是md的相对地址，而最终网页展示的html文件，因此网页段是相对于html的相对路径。两种参考路径不同，肯定会发生本地显示正常（相对md的相对路径），网页不显示图片（相对html的相对路径）

#### 解决方式：

尽管是在 本地编辑md文件，但是写相对地址的时，要参照html的文件写地址（经测试url填写绝对路径时，图片仍然失效）

具体步骤 如下：

1. 将所有的文件放在一个文件夹内，且该文件夹内，又可以细分子文件夹来存放图片；

2. 相对路径时上一个目录下的img文件，这样设置以后能在本地直接看到图片
3. 将img文件同步到public内，如此一来生成的html文件也能够按照相对路径的位置，找到指定的图片。